<ng-container *ngIf="user$ | async as user">
  <h3 class="title">
    Account
  </h3>
  <app-card>
    <h4 class="name">
      {{ user.name }}
    </h4>
    <p class="email">
      {{ user.email }}
    </p>
    <button app-button
      (click)="signOut()"
    >
      Sign Out
    </button>
  </app-card>

  <h3 class="title">
    Settings
  </h3>
  <app-card>
    <form #form="ngForm">
      <app-input label="Menu Start Day">
        <select id="Menu Start Day"
          name="menuStartDay"
          [ngModel]="user.preferences?.menuStartDay"
          (ngModelChange)="updateAction$.next({ menuStartDay: $event })"
        >
          <option *ngFor="let day of days; trackBy: trackByFn"
            [ngValue]="day"
          >
            {{ day }}
          </option>
        </select>
      </app-input>
      <app-input
        label="Empty Meal Text"
      >
        <input
          id="Empty Meal Text"
          type="text"
          name="emptyMealText"
          [ngModel]="user?.preferences?.emptyMealText"
          (ngModelChange)="updateAction$.next({ emptyMealText: $event })"
          appAutofocus
        />
      </app-input>
    </form>
  </app-card>
</ng-container>
